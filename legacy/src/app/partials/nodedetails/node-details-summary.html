<!-- Notifications -->
<section class="p-strip u-no-padding--bottom">
  <div class="row">
    <div
      class="p-notification--negative"
      data-ng-if="node.power_state === 'error' && node.events && node.events.length > 0"
    >
      <p class="p-notification__response">
        <span class="p-notification__status">Error:</span> {$
        getEventText(node.events[0]) $}.
        <a
          href="{$ legacyURLBase $}/{$ type_name $}/{$ node.system_id $}?area=events"
          >See all events</a
        >.
      </p>
    </div>
</section>

<section class="p-strip is-shallow">
  <!-- Device overview -->
  <div ng-if="node.node_type === 1">
    <div class="row u-equal-height">
      <div class="col-4 p-card--highlighted">
        <div maas-card-loader="device"></div>
      </div>
      <div class="col-4 p-card--highlighted">
        <div maas-card-loader="tags"></div>
      </div>
    </div>
  </div>

  <!-- Region controller overview -->
  <div ng-if="node.node_type === 3">
    <div class="row u-equal-height">
      <div class="col-4 p-card--highlighted">
        <div maas-card-loader="services"></div>
      </div>
      <div class="col-4 p-card--highlighted">
        <div maas-card-loader="controller"></div>
      </div>
      <div class="col-4 p-card--highlighted">
        <div maas-card-loader="hardware_info"></div>
      </div>
    </div>
    <div class="row u-equal-height">
      <div
        class="col-4 p-card--highlighted"
        ng-class="{ 'is-error': node.cpu_test_status.status === 3 }"
      >
        <div maas-card-loader="cpu"></div>
      </div>
      <div
        class="col-4 p-card--highlighted"
        ng-class="{ 'is-error': node.memory_test_status.status === 3 }"
      >
        <div maas-card-loader="memory"></div>
      </div>
      <div
        class="col-4 p-card--highlighted"
        ng-class="{ 'is-error': node.storage_test_status.status === 3 }"
      >
        <div maas-card-loader="storage"></div>
      </div>
    </div>
    <div class="row u-equal-height">
      <div class="col-4 p-card--highlighted">
        <div maas-card-loader="tags"></div>
      </div>
    </div>
  </div>

  <!-- Rack / region and rack controller overview-->
  <div ng-if="node.node_type == 2 || node.node_type == 4">
    <div class="row u-equal-height">
      <div class="col-4 p-card--highlighted">
        <div maas-card-loader="services"></div>
      </div>
      <div class="col-8">
        <div class="row u-equal-height">
          <div class="col-4 p-card--highlighted">
            <div maas-card-loader="images"></div>
          </div>
          <div class="col-4 p-card--highlighted">
            <div maas-card-loader="controller"></div>
          </div>
        </div>
        <div class="row u-equal-height">
          <div class="col-4 p-card--highlighted">
            <div maas-card-loader="hardware_info"></div>
          </div>
          <div class="col-4 p-card--highlighted">
            <div maas-card-loader="tags"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="row u-equal-height">
      <div
        class="col-4 p-card--highlighted"
        ng-class="{ 'is-error': node.cpu_test_status.status === 3 }"
      >
        <div maas-card-loader="cpu"></div>
      </div>
      <div
        class="col-4 p-card--highlighted"
        ng-class="{ 'is-error': node.memory_test_status.status === 3 }"
      >
        <div maas-card-loader="memory"></div>
      </div>
      <div
        class="col-4 p-card--highlighted"
        ng-class="{ 'is-error': node.storage_test_status.status === 3 }"
      >
        <div maas-card-loader="storage"></div>
      </div>
    </div>
  </div>
</section>
